Abrir terminal de base de datos:

    psql -h localhost -U tfg -W tfg




    name = request.form.get("user")
    email = request.form.get("email")
    pwd = request.form.get("pwd")
    usr_db = User.query.filter_by(usr=name).first()
    if usr_db is not None:
        flash(f'Account created for {form.username.data}!', 'success')
        return redirect(url_for('index'))
    usr = User(usr=name, password=generate_password_hash(pwd, "sha256"), email=email, admin=False)
    db.session.add(usr)
    db.session.commit()
    return jsonify({"success": True})














    class MyModelView(ModelView):
        edit_template = "admin/edit.html"
        list_template = "admin/list.html"
        column_list = ("usr", "email", "admin")
        column_searchable_list = ("usr", "email")
        column_labels = dict(usr='Username', email='Email', admin='Administrator')

        def is_accessible(self):
            return current_user.is_authenticated and current_user.admin


admin.add_view(MyModelView(User, db.session))